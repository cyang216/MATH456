---
title: "Daily Schedule"
output: html_document
---

```{r include = FALSE}
library(dplyr)
library(stringr)
library(readr)
```

```{r include = FALSE}
rawdat <- read_csv(file.path("admin", "lecture-notes.csv"))
cdat <- rawdat %>% mutate(Date = format(as.Date(date, "%m/%d/%Y"), "%m/%d"), 
                          Week = as.numeric(str_extract(wk, "([0-9]{2})")), 
                          notes = ifelse(grepl("^wk", wk) & raw_notes != "",
                                  sprintf("%s: %s", wk, raw_notes), raw_notes))
#glimpse(cdat)

## link to the class page of any class meetings where such exists
## AND I want to link
## year 1: we just filtered for presence of .html file
## year 2: yes merge those but also filter on link_it for gradual reveal
cmdat <- data_frame(html = list.files(pattern = '^wk.*html$'))
cmdat <- cmdat %>% mutate(wk = str_extract(html, "wk[0-9]+"))
cdat  <- cdat %>% full_join(cmdat)

#cdat <- cdat %>%
#  mutate(html_exists = !is.na(html)) %>% 

cdat$notes[cdat$link_it] <- str_replace(cdat$notes[cdat$link_it], "(wk[0-9]{2})", '<a href="LINK">\\1</a>')
cdat$Notes <- ifelse(cdat$link_it,  str_replace(cdat$notes, "LINK", cdat$html), cdat$notes)
```

<!-- unholy hack to make following two tables less wide and the same wide -->
<style type="text/css">
table {
   max-width: 50%;
}
</style>

## Math 456: Applied Statistics II (Subject to adjustment)

```{r results = 'asis', echo = FALSE}
knitr::kable(cdat %>% select(Week, Date, Notes))
```
