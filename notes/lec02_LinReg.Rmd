---
title: "Lec 02: Linear Regression Analysis"
author: "MATH 456 - Spring 2016"
output:
  html_document:
    highlight: pygments
    theme: spacelab
  pdf_document: default
---
```{r,echo=FALSE, warning=FALSE, message=FALSE}
library(knitr); library(rmarkdown);
opts_chunk$set(warning=FALSE, message=FALSE) 
```

```{r results="asis", echo=FALSE}
source("C:/Github/MATH456/stylesheets/custom.R")
```

# Assigned Reading
Afifi: Chapters 6-7

# Simple Regression and Correlation (_Afifi Ch 6_)

## Aims
* Describe the relationship between an independent variable X and a continuous
  dependent variable $Y$ as a straight line. The textbook discusses two cases: 
    - Fixed-$X$: values of $X$ are preselected by investigator
    - Variable-$X$: have random sample of $(X,Y)$ values
    - Calculations are the same, 
* Draw inferences regarding this relationship
* Predict value of $Y$ for a given value of $X$

## Mathmatical Model
* The mean of $Y$ values at any given $X$ is $\beta_{0} + \beta_{1} X$
* The variance of $Y$ values at any $X$ is $\sigma^2$ (same for all X)
* $Y$ values are normally distributed at any given $X$ (need for inference)

![Figure 6.2](slr_graph.png)

## Parameter Estimates
* Estimate the slope $\beta_{1}$ and intercept $\beta_{0}$ using least-squares methods.
* The residual mean squared error (RMSE) is an estimate of the variance $s^{2}$
* Typically interested in inference on $\beta_{1}$
    - Assume no relationship between $X$ and $Y$ $(H_{0}: \beta_{1}=0)$ 
      until there is reason to believe there is one 
      $(H_{0}: \beta_{1} \neq 0)$

## Interval estimation
* Everything is estimated with some degree of error
* Confidence intervals for the mean of $Y$
* Prediction intervals for an individual $Y$ 

Which one is wider? Why?

## Corelation Coefficient
* The correlation coefficient $\rho$ measures the strength of association
  between $X$ and $Y$ in the _population_.
* $\sigma^{2} = VAR(Y|X)$ is the variance of $Y$ for a specific $X$.
* $\sigma_{y}^{2} = VAR(Y)$ is the variance of $Y$ for all $X$'s.

$$ \sigma^{2} = \sigma_{y}^{2}(1-\rho^{2})$$
$$ \rho^{2} = \frac{\sigma_{y}^{2} - \sigma^{2}}{\sigma_{y}^{2}}$$

* $\rho^{2}$ = reduction in variance of Y associated with knowledge of X/original variance of Y
* **Coefficient of Determiniation**: $100\rho^{2}$ = % of variance of Y “associated with X” or “explained by X”
* Caution: association vs. causation.

### Example: Lung Function
Data were from an epidemiological study of households living in four areas with
different amounts and types of air pollution.

1. Download the [Lungraw](https://drive.google.com/open?id=0B83Z8_sNw3KPS29hZ1p3eXk4dmc) 
   data set and its [LungCodebook](https://drive.google.com/open?id=0B83Z8_sNw3KPNHpjZDRfaTR1LTQ) 
   from the Google Drive. 
2. Open this file. What is the first problem you encounter? 
3. Read in the data into R using `read.delim()` and use the codebook to fix the variable names.
```{r}
d <- read.delim("C:/GitHub/MATH456/data/Lungraw.txt", sep=" ", header=FALSE, stringsAsFactors = FALSE)
names(d) <- c("ID", "AREA", "FSEX", "FAGE", "FHEIGHT", "FWEIGHT", "FFVC", "FFEV1", 
                            "MSEX", "MAGE", "MHEIGHT", "MWEIGHT", "MFVC", "MFEV1", 
                            "OCSEX", "OCAGE", "OCHEIGHT", "OCWEIGHT", "OCFVC", "OCFEV1",
                            "MCSEX", "MCAGE", "MCHEIGHT", "MCWEIGHT", "MCFVC", "MCFEV1",
                            "YCSEX", "YCAGE", "YCHEIGHT", "YCWEIGHT", "YCFVC", "YCFEV1")
```
4. Use `str(d)` to check to see if all the variables are the correct data types. 
   Fix any that are not. 
   [Link to the Stack Overflow post that I googled to find a solution](http://stackoverflow.com/questions/22772279/converting-multiple-columns-from-character-to-numeric-format-in-r)
```{r}
str(d)
cols.num <- c("MCSEX", "MCAGE", "MCHEIGHT", "MCWEIGHT", "MCFVC", "MCFEV1",
              "YCSEX", "YCAGE", "YCHEIGHT", "YCWEIGHT", "YCFVC", "YCFEV1")
d[cols.num] <- sapply(d[cols.num],as.numeric)
str(d)
```

5. Save this data as a tab-delimited text file onto your computer. 
```{r}
write.table("d", file="C:/Github/MATH456/data/Lung.txt", sep="\t")
```


##### On Your Own: 
Write your responses in a new Markdown file named *userid_ch6.rmd*.



# Multiple Regression and Correlation (_Afifi Ch 7_)


##### On Your Own
Write your responses in a new Markdown file named *userid_ch7.rmd*.


