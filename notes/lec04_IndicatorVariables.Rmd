---
title: "Lec 04: Indicator variables and Splines"
author: "MATH 456 - Spring 2016"
output:
  html_document:
    highlight: pygments
    theme: spacelab
    toc: yes
  pdf_document: default
---
```{r,echo=FALSE, warning=FALSE, message=FALSE}
library(knitr); library(rmarkdown);library(ggplot2)
opts_chunk$set(warning=FALSE, message=FALSE) 
```

```{r results="asis", echo=FALSE}
source("C:/Github/MATH456/stylesheets/custom.R")
```

Navbar: [[Home]](../index.html) [[Schedule]](../Schedule.html) [[Data]](../data/Datasets.html) [[Week 4 Overview]](../wk04.html) [[HW Rubric]](../admin/rubric.html)  [[Google Group]](https://groups.google.com/forum/#!forum/csuc_stat)  [[Google Drive]](https://drive.google.com/a/mail.csuchico.edu/folderview?id=0B83Z8_sNw3KPcnVrYzVFRHUtcHM&usp=sharing)

# Assigned Reading
Afifi: Chapter 9.3, Harrel Ch 2


## Factor variable coding

* Better used term: Indicator variable
* Math notation: **I(gender == "Female")**. 
* A.k.a reference coding
* For a nominal X with K categories, define K indicator variables.
  - Choose a reference (referent) category:
  - Leave it out
  - Use remaining K-1 in the regression.
  - Often, the largest category is chosen as the reference category.

### Example: Religion against income and depression
```{r}
dep <- read.table("C:/GitHub/MATH456/data/Depress_020916.txt", sep="\t", header=TRUE)
names(dep) <- tolower(names(dep)) # I hate all captal variable names
levels(dep$marital)
summary(lm(log(income) ~ age + marital,data=dep))
```

* For every year older, a persons income decreases by `1-exp(-0.009)` 1%. 
* Married individuals have a `1-exp(0.4166)` = 52% higher income compared to those who are divorced. 
* Those who have never been married have `1-exp(-0.18)`= 16% lower income compared to those who are divorced. 
* Separated individuals have `1-exp(-0.394)` 32% lower income compared to those who are divorced. 
* Widowed individuals have `1-exp(-0.278)` 24% lower income compared to those who are divorced. 

Reference on how to interpret regression parameters when they have been log transformed: http://www.ats.ucla.edu/stat/mult_pkg/faq/general/log_transformed_regression.htm 

##### On Your Own

** depression regression using education status
if too small of categories, collapse categories and re-run.


